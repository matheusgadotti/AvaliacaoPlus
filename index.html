<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Avaliação Plus</title>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>

  <style>
    body { font-family: Arial; max-width: 750px; margin: auto; padding: 20px; }
    .campo { margin-bottom: 20px; }
    .pergunta { font-weight: bold; margin-bottom: 5px; }
    button {
      padding: 12px 20px;
      background: #5913ca;
      color: white;
      border: none;
      cursor: pointer;
      font-size: 16px;
      border-radius: 8px;
    }
    button:hover { background: #5913ca; }
  </style>
</head>
<body>

  <h1>Avaliação - Plus</h1>

  <form id="formAvaliacao">

    <!-- Nome -->
    <div class="campo">
      <label><b>Estrutura:</b></label><br>
      <input type="text" id="nome" required style="width: 100%; padding: 8px;">
    </div>



    <!-- PERGUNTA 1 -->
    <div class="campo">
      <div class="pergunta">1. Como criar uma lead no Funil?</div>
      <label><input type="radio" name="p1" value="Conseguiu Realizar" data-score="10" required> Conseguiu Realizar</label><br>
      <label><input type="radio" name="p1" value="Realizou Parcialmente" data-score="5"> Realizou Parcialmente</label><br>
      <label><input type="radio" name="p1" value="Não Realizou" data-score="0"> Não Realizou</label>
    </div>

    <!-- PERGUNTA 2 -->
    <div class="campo">
      <div class="pergunta">2. </div>
      <label><input type="radio" name="p2" value="Conseguiu Realizar" data-score="10" required> Conseguiu Realizar</label><br>
      <label><input type="radio" name="p2" value="Realizou Parcialmente" data-score="5"> Realizou Parcialmente</label><br>
      <label><input type="radio" name="p2" value="Não Realizou" data-score="0"> Não Realizou</label>
    </div>

    <!-- PERGUNTA 3 -->
    <div class="campo">
      <div class="pergunta">3. </div>
      <label><input type="radio" name="p3" value="Conseguiu Realizar" data-score="10" required> Conseguiu Realizar</label><br>
      <label><input type="radio" name="p3" value="Realizou Parcialmente" data-score="5"> Realizou Parcialmente</label><br>
      <label><input type="radio" name="p3" value="Não Realizou" data-score="0"> Não Realizou</label>
    </div>

    <!-- PERGUNTA 4 -->
    <div class="campo">
      <div class="pergunta">4. </div>
      <label><input type="radio" name="p4" value="Conseguiu Realizar" data-score="10" required> Conseguiu Realizar</label><br>
      <label><input type="radio" name="p4" value="Realizou Parcialmente" data-score="5"> Realizou Parcialmente</label><br>
      <label><input type="radio" name="p4" value="Não Realizou" data-score="0"> Não Realizou</label>
    </div>

    <!-- PERGUNTA 5 -->
    <div class="campo">
      <div class="pergunta">5. </div>
      <label><input type="radio" name="p5" value="Conseguiu Realizar" data-score="10" required> Conseguiu Realizar</label><br>
      <label><input type="radio" name="p5" value="Realizou Parcialmente" data-score="5"> Realizou Parcialmente</label><br>
      <label><input type="radio" name="p5" value="Não Realizou" data-score="0"> Não Realizou</label>
    </div>

        <!-- PERGUNTA 6 -->
    <div class="campo">
      <div class="pergunta">6. </div>
      <label><input type="radio" name="p6" value="Conseguiu Realizar" data-score="10" required> Conseguiu Realizar</label><br>
      <label><input type="radio" name="p6" value="Realizou Parcialmente" data-score="5"> Realizou Parcialmente</label><br>
      <label><input type="radio" name="p6" value="Não Realizou" data-score="0"> Não Realizou</label>
    </div>

    <!-- PERGUNTA 7 -->
    <div class="campo">
      <div class="pergunta">7. </div>
      <label><input type="radio" name="p7" value="Conseguiu Realizar" data-score="10" required> Conseguiu Realizar</label><br>
      <label><input type="radio" name="p7" value="Realizou Parcialmente" data-score="5"> Realizou Parcialmente</label><br>
      <label><input type="radio" name="p7" value="Não Realizou" data-score="0"> Não Realizou</label>
    </div>

    <!-- PERGUNTA 8 -->
    <div class="campo">
      <div class="pergunta">8. </div>
      <label><input type="radio" name="p8" value="Conseguiu Realizar" data-score="10" required> Conseguiu Realizar</label><br>
      <label><input type="radio" name="p8" value="Realizou Parcialmente" data-score="5"> Realizou Parcialmente</label><br>
      <label><input type="radio" name="p8" value="Não Realizou" data-score="0"> Não Realizou</label>
    </div>

    <!-- PERGUNTA 9 -->
    <div class="campo">
      <div class="pergunta">9. </div>
      <label><input type="radio" name="p9" value="Conseguiu Realizar" data-score="10" required> Conseguiu Realizar</label><br>
      <label><input type="radio" name="p9" value="Realizou Parcialmente" data-score="5"> Realizou Parcialmente</label><br>
      <label><input type="radio" name="p9" value="Não Realizou" data-score="0"> Não Realizou</label>
    </div>

    <!-- PERGUNTA 10 -->
    <div class="campo">
      <div class="pergunta">10. </div>
      <label><input type="radio" name="p10" value="Conseguiu Realizar" data-score="10" required> Conseguiu Realizar</label><br>
      <label><input type="radio" name="p10" value="Realizou Parcialmente" data-score="5"> Realizou Parcialmente</label><br>
      <label><input type="radio" name="p10" value="Não Realizou" data-score="0"> Não Realizou</label>
    </div>

    <!-- Comentário opcional -->
    <div class="campo">
      <label><b>Comentário adicional:</b></label>
      <textarea id="comentario" rows="4" style="width: 100%; padding: 8px;"></textarea>
    </div>

    <button type="button" onclick="gerarPDF()">Gerar PDF</button>
  </form>


  <!-- SCRIPT DO PDF -->
  <script>
    async function gerarPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

function calcularNotaFinal() {
    let total = 0;
    const selecionados = document.querySelectorAll('input[type="radio"]:checked');

    selecionados.forEach(radio => {
        const score = parseInt(radio.getAttribute("data-score"));
        total += score;
    });

    return total;
}

      const nome = document.getElementById("nome").value;
      const nota = calcularNotaFinal();
      const comentario = document.getElementById("comentario").value || "Nenhum comentário";

      // Coleta das respostas
      const respostas = {
        "1 - Criar lead no Funil": document.querySelector('input[name="p1"]:checked').value,
        "2 - ": document.querySelector('input[name="p2"]:checked').value,
        "3 - ": document.querySelector('input[name="p3"]:checked').value,
        "4 - ": document.querySelector('input[name="p4"]:checked').value,
        "5 - ": document.querySelector('input[name="p5"]:checked').value,
        "6 - ": document.querySelector('input[name="p6"]:checked').value,
        "7 - ": document.querySelector('input[name="p7"]:checked').value,
        "8 - ": document.querySelector('input[name="p8"]:checked').value,
        "9 - ": document.querySelector('input[name="p9"]:checked').value,
        "10 - ": document.querySelector('input[name="p10"]:checked').value,
      };

      // ================================
      // SUA LOGO EM BASE64 → COLE AQUI
      // ================================
      const logoBase64 = "DATA_BASE64_AQUI";

      // CABEÇALHO
      if (logoBase64.length > 50) {
        doc.addImage(logoBase64, "PNG", 15, 10, 30, 30);
      }

      doc.setFont("helvetica", "bold");
      doc.setFontSize(22);
      doc.setTextColor(157, 75, 255);
      doc.text("Avaliação - Plus", 105, 22, { align: "center" });

      doc.setDrawColor(157, 75, 255);
      doc.setLineWidth(1.5);
      doc.line(15, 40, 195, 40);

      // Dados iniciais
      doc.setFontSize(12);
      doc.setTextColor(0, 0, 0);
      doc.text(`Estrutura: ${nome}`, 15, 50);
      doc.text(`Data Avaliação: ${new Date().toLocaleDateString("pt-BR")}`, 15, 58);
      doc.text(`Nota minima para aprovação: 70 `, 15, 66);

      // TABELA DAS PERGUNTAS
      const body = Object.entries(respostas).map(([pergunta, resposta]) => [pergunta, resposta]);

      doc.autoTable({
        startY: 75,
        head: [["Nota Final", nota]],
        body: body,
        headStyles: {
          fillColor: [157, 75, 255],
          textColor: 255,
          fontSize: 13
        },
        alternateRowStyles: { fillColor: [245, 235, 255] },
        margin: { left: 15, right: 15 }
      });


      // Legenda
      doc.setFont("helvetica", "normal");
      doc.text("Conseguiu Realizar = 10 Pontos", 15, doc.lastAutoTable.finalY + 15);
      doc.text("Realizou Parcialmente = 5 Pontos", 15, doc.lastAutoTable.finalY + 25);
      doc.text("Não Realizou = 0 Pontos", 15, doc.lastAutoTable.finalY + 35);


      // Comentário
      doc.setFont("helvetica", "bold");
      doc.text("Comentário adicional:", 15, doc.lastAutoTable.finalY + 55);

      doc.setFont("helvetica", "normal");
      const texto = doc.splitTextToSize(comentario, 180);
      doc.text(texto, 15, doc.lastAutoTable.finalY + 65);

      // RODAPÉ
      const pageHeight = doc.internal.pageSize.height;
      doc.setFontSize(10);
      doc.setTextColor(120);
      doc.text("Documento gerado automaticamente pelo sistema Plus.", 105, pageHeight - 15, { align: "center" });

      doc.save(`avaliacao-plus-${nome}.pdf`);
    }
  </script>

</body>
</html>
